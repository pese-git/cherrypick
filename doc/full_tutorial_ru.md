# –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ CherryPick DI –¥–ª—è Dart –∏ Flutter: –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–¥–∞

**CherryPick** ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –Ω–∞ Dart –∏ Flutter. –û–Ω –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä—É–µ–º—ã—Ö –±–∏–Ω–¥–∏–Ω–≥–æ–≤, –∞ —Ç–∞–∫–∂–µ field injection —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π.

> –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:  
> - [`cherrypick`](https://pub.dev/packages/cherrypick) ‚Äî runtime DI core  
> - [`cherrypick_annotations`](https://pub.dev/packages/cherrypick_annotations) ‚Äî –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è DI  
> - [`cherrypick_generator`](https://pub.dev/packages/cherrypick_generator) ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è DI-–∫–æ–¥–∞  
>

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ CherryPick –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –¥—Ä—É–≥–∏–º–∏ DI-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏

- üì¶ –ü—Ä–æ—Å—Ç–æ–π –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π API –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
- ‚ö°Ô∏è –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö _–∏_ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π.
- üß© DI —á–µ—Ä–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–¥–∞, –≤–∫–ª—é—á–∞—è field injection.
- üè∑Ô∏è –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (named bindings).
- üè≠ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è –±–∏–Ω–¥–∏–Ω–≥–æ–≤ –¥–ª—è runtime-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ–∞–±—Ä–∏–∫.
- üå≤ –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ Scope'–æ–≤ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
- üïπÔ∏è –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (tryResolve).
- üêû –Ø—Å–Ω—ã–µ compile-time –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º DI-–æ–ø–∏—Å–∞–Ω–∏–∏.

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç CherryPick: –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: –±–∏–Ω–¥–∏–Ω–≥–∏

```dart
bind<MyService>().toProvide(() => MyServiceImpl());
bind<MyRepository>().toProvideAsync(() async => await initRepo());
bind<UserService>().toProvideWithParams((id) => UserService(id));

// Singleton
bind<MyApi>().toProvide(() => MyApi()).singleton();

// –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç
final config = AppConfig.dev();
bind<AppConfig>().toInstance(config);

// –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Future/–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
final setupFuture = loadEnvironment();
bind<Environment>().toInstanceAsync(setupFuture);
```


- **toProvide** ‚Äî –æ–±—ã—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞.
- **toProvideAsync** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–∂–∏–¥–∞—Ç—å—Å—è Future).
- **toProvideWithParams / toProvideAsyncWithParams** ‚Äî —Ñ–∞–±—Ä–∏–∫–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
- **toInstance** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.
- **toInstanceAsync** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π Future, –∫–∞–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.

### –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –±–∏–Ω–¥–∏–Ω–≥–∏ (Named)

–ú–æ–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏:

```dart
bind<ApiClient>().toProvide(() => ApiClientProd()).withName('prod');
bind<ApiClient>().toProvide(() => ApiClientMock()).withName('mock');

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏:
final api = scope.resolve<ApiClient>(named: 'mock');
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª: singleton

- `.singleton()` ‚Äî –æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å –Ω–∞ –≤—Å—ë –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ Scope.
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∂–¥—ã–π resolve —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç.

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –±–∏–Ω–¥–∏–Ω–≥–∏

–ü–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å runtime-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID:

```dart
bind<UserService>().toProvideWithParams((userId) => UserService(userId));

// –ü–æ–ª—É—á–µ–Ω–∏–µ
final userService = scope.resolveWithParams<UserService>(params: '123');
```

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Scope'–∞–º–∏: –∏–µ—Ä–∞—Ä—Ö–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –±–∏–∑–Ω–µ—Å-–∫–µ–π—Å–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ Scope (root), –Ω–æ CherryPick –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö Scope:

```dart
final rootScope = CherryPick.openRootScope();
final profileScope = rootScope.openSubScope('profile')
    ..installModules([ProfileModule()]);
```

- **–ü–æ–¥-—Å–∫–æ—É–ø** –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–æ–¥–∏—Ç–µ–ª—è.
- –ü—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–≤–æ–π Scope, –ø–æ—Ç–æ–º –∏–µ—Ä–∞—Ä—Ö–∏—è –≤–≤–µ—Ä—Ö.


## –†–∞–±–æ—Ç–∞ —Å –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º –∏ –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –ø–æ–¥—Å–∫–æ—É–ø–æ–≤ (subscopes) –≤ CherryPick

CherryPick –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (scopes), –≥–¥–µ –∫–∞–∂–¥—ã–π scope –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ "–∫–æ—Ä–Ω–µ–≤—ã–º", —Ç–∞–∫ –∏ –¥–æ—á–µ—Ä–Ω–∏–º. –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–Ω—è—Ç–∏–µ **scope name** (–∏–º—è –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏), –∞ —Ç–∞–∫–∂–µ —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–∫–æ–ø–æ–≤ –ø–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º.

### –û—Ç–∫—Ä—ã—Ç–∏–µ subScope –ø–æ –∏–º–µ–Ω–∏

CherryPick –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–µ—Ä–µ–≤–∞ –æ–±–ª–∞—Å—Ç–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä:

```dart
final subScope = CherryPick.openScope(scopeName: 'profile.settings');
```

- –ó–¥–µ—Å—å `'profile.settings'` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ–¥—Å–∫–æ—É–ø `profile` —É rootScope, –∑–∞—Ç–µ–º ‚Äî –ø–æ–¥—Å–∫–æ—É–ø `settings` —É `profile`.
- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Ç–æ—á–∫–∞ (`.`). –ï–≥–æ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å, —É–∫–∞–∑–∞–≤ `separator` –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º.

**–ü—Ä–∏–º–µ—Ä —Å –¥—Ä—É–≥–∏–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º:**

```dart
final subScope = CherryPick.openScope(
  scopeName: 'project>>dev>>api',
  separator: '>>',
);
```

### –ò–µ—Ä–∞—Ä—Ö–∏—è –∏ –¥–æ—Å—Ç—É–ø

–ö–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–º—É scope.  
–≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä:  
- `main.profile` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- `main.profile.details` ‚Äî –µ—â—ë –±–æ–ª–µ–µ "—É–∑–∫–∞—è" –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏

### –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥—Å–∫–æ—É–ø–æ–≤

–ß—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π subScope, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—Ç –∂–µ –ø—É—Ç—å:

```dart
CherryPick.closeScope(scopeName: 'profile.settings');
```

- –ï—Å–ª–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç–µ –≤–µ—Ä—Ö–Ω–∏–π —Å–∫–æ—É–ø (`profile`), –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —Ç–æ–∂–µ –±—É–¥—É—Ç –æ—á–∏—â–µ–Ω—ã.

### –ö—Ä–∞—Ç–∫–æ –æ –º–µ—Ç–æ–¥–∞—Ö

| –ú–µ—Ç–æ–¥                    | –û–ø–∏—Å–∞–Ω–∏–µ                                                |
|--------------------------|--------------------------------------------------------|
| `openRootScope()`        | –û—Ç–∫—Ä—ã—Ç—å/–ø–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π scope                        |
| `closeRootScope()`       | –ó–∞–∫—Ä—ã—Ç—å root scope, —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏            |
| `openScope(scopeName)`   | –û—Ç–∫—Ä—ã—Ç—å scope(—ã) –ø–æ –∏–º–µ–Ω–∏ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π (`'a.b.c'`)      |
| `closeScope(scopeName)`  | –ó–∞–∫—Ä—ã—Ç—å —É–∫–∞–∑–∞–Ω–Ω—ã–π scope –∏–ª–∏ subscope                   |

---

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**  
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –∏ "—Ç–æ—á–µ—á–Ω—É—é" –Ω–æ—Ç–∞—Ü–∏—é –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∑–æ–Ω –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤ –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö ‚Äî —ç—Ç–æ –ø–æ–≤—ã—Å–∏—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–∑–≤–æ–ª–∏—Ç —É–¥–æ–±–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –Ω–∞ –ª—é–±—ã—Ö —É—Ä–æ–≤–Ω—è—Ö.

---

**–ü—Ä–∏–º–µ—Ä:**

```dart
// –û—Ç–∫—Ä–æ–µ—Ç scopes –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏: app -> module -> page
final scope = CherryPick.openScope(scopeName: 'app.module.page');

// –ó–∞–∫—Ä–æ–µ—Ç 'module' –∏ –≤—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ subscopes
CherryPick.closeScope(scopeName: 'app.module');
```

---

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å DI-–ø–æ–¥—Ö–æ–¥ CherryPick –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –ª—é–±–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏!

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ï—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –Ω—É–∂–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –µ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ tryResolve/tryResolveAsync:

```dart
final service = scope.tryResolve<OptionalService>(); // –≤–µ—Ä–Ω–µ—Ç null, –µ—Å–ª–∏ –Ω–µ—Ç
```

---

## –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é

CherryPick –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç DI —á–µ—Ä–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π

| –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è     | –î–ª—è —á–µ–≥–æ                  | –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç                    |
| ------------- | ------------------------- | -------------------------------- |
| `@module`     | DI-–º–æ–¥—É–ª—å                 | –ö–ª–∞—Å—Å—ã                           |
| `@singleton`  | Singleton                 | –ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞                    |
| `@instance`   | –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç              | –ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞                    |
| `@provide`    | –ü—Ä–æ–≤–∞–π–¥–µ—Ä                 | –ú–µ—Ç–æ–¥—ã (—Å DI params)             |
| `@named`      | –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π –±–∏–Ω–¥–∏–Ω–≥       | –ê—Ä–≥—É–º–µ–Ω—Ç –º–µ—Ç–æ–¥–∞/–ê—Ç—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞ |
| `@params`     | –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤       | –ê—Ä–≥—É–º–µ–Ω—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞              |
| `@injectable` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ field injection | –ö–ª–∞—Å—Å—ã                           |
| `@inject`     | –ê–≤—Ç–æ–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ             | –ê—Ç—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞                 |
| `@scope`      | Scope/realm               | –ê—Ç—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞                 |

### –ü—Ä–∏–º–µ—Ä DI-–º–æ–¥—É–ª—è

```dart
import 'package:cherrypick_annotations/cherrypick_annotations.dart';

@module()
abstract class AppModule extends Module {
  @singleton()
  @provide()
  ApiClient apiClient() => ApiClient();

  @provide()
  UserService userService(ApiClient api) => UserService(api);

  @singleton()
  @provide()
  @named('mock')
  ApiClient mockApiClient() => ApiClientMock();
}
```
- –ú–µ—Ç–æ–¥—ã, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ `@provide`, —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ñ–∞–±—Ä–∏–∫–∞–º–∏ DI.  
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –¥—Ä—É–≥–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –±–∏–Ω–¥–∏–Ω–≥–∞, –∏–º–µ–Ω–∏.

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–æ—Ç —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

```dart
class $AppModule extends AppModule {
	@override
	void builder(Scope currentScope) {
		bind<ApiClient>().toProvide(() => apiClient()).singelton();
		bind<UserService>().toProvide(() => userService(currentScope.resolve<ApiClient>()));
		bind<ApiClient>().toProvide(() => mockApiClient()).withName('mock').singelton();
	}	
}
```


### –ü—Ä–∏–º–µ—Ä –∏–Ω—ä–µ–∫—Ü–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ field injection

```dart
@injectable()
class ProfileBloc with _$ProfileBloc {
  @inject()
  late final AuthService auth;

  @inject()
  @named('admin')
  late final UserService adminUser;
  
  ProfileBloc() {
    _inject(this); // injectFields ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥
  }
}
```
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç mixin (`_$ProfileBloc`), –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∑–æ–ª–≤–∏—Ç –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –ø–æ–ª—è –∫–ª–∞—Å—Å–∞.
- –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è `@named` –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –∏–º–µ–Ω–∏.

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–æ—Ç —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

```dart
mixin $ProfileBloc {
	@override
	void _inject(ProfileBloc instance) {
		instance.auth = CherryPick.openRootScope().resolve<AuthService>();
		instance.adminUser = CherryPick.openRootScope().resolve<UserService>(named: 'admin');
	}	
}
```


### –ö–∞–∫ —ç—Ç–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

```dart
void main() async {
  final scope = CherryPick.openRootScope();
  scope.installModules([
    $AppModule(),
  ]);
  // DI —á–µ—Ä–µ–∑ field injection
  final bloc = ProfileBloc();
  runApp(MyApp(bloc: bloc));
}
```

---

## –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `toProvideAsync`, –∞ –ø–æ–ª—É—á–∞—Ç—å –∏—Ö ‚Äî —á–µ—Ä–µ–∑ `resolveAsync`:

```dart
bind<RemoteConfig>().toProvideAsync(() async => await RemoteConfig.load());

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
final config = await scope.resolveAsync<RemoteConfig>();
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- –ü—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö –∏–ª–∏ –æ—à–∏–±–∫–∞—Ö DI –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ–µ compile-time —Å–æ–æ–±—â–µ–Ω–∏–µ.
- –û—à–∏–±–∫–∏ –±–∏–Ω–¥–∏–Ω–≥–æ–≤ –≤—ã—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞. –≠—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç runtime-–æ—à–∏–±–∫–∏ –∏ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CherryPick —Å Flutter: –ø–∞–∫–µ—Ç cherrypick_flutter

### –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ

[`cherrypick_flutter`](https://pub.dev/packages/cherrypick_flutter) ‚Äî —ç—Ç–æ –ø–∞–∫–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ CherryPick DI —Å Flutter. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –≤–∏–¥–∂–µ—Ç-–ø—Ä–æ–≤–∞–π–¥–µ—Ä `CherryPickProvider`, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –¥–µ—Ä–µ–≤–µ –≤–∏–¥–∂–µ—Ç–æ–≤ –∏ –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ root scope DI (–∏ –ø–æ–¥—Å–∫–æ—É–ø–∞–º) –ø—Ä—è–º–æ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ DI Scope:**  
  –ß–µ—Ä–µ–∑ `CherryPickProvider` –≤—ã –ª–µ–≥–∫–æ –ø–æ–ª—É—á–∞–µ—Ç–µ –¥–æ—Å—Ç—É–ø –∫ rootScope –∏ –ø–æ–¥—Å–∫–æ—É–ø–∞–º –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞ –¥–µ—Ä–µ–≤–∞ Flutter.
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:**  
  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `CherryPickProvider.of(context)` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ DI –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–∏—Ö –≤–∏–¥–∂–µ—Ç–æ–≤.

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```dart
import 'package:flutter/material.dart';
import 'package:cherrypick_flutter/cherrypick_flutter.dart';

void main() {
  runApp(
    CherryPickProvider(
      child: MyApp(),
    ),
  );
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final rootScope = CherryPickProvider.of(context).openRootScope();

    return MaterialApp(
      home: Scaffold(
        body: Center(
          child: Text(
            rootScope.resolve<AppService>().getStatus(),
          ),
        ),
      ),
    );
  }
}
```

- –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ `CherryPickProvider` –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ DI scope —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç.
- –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–¥—Å–∫–æ—É–ø—ã, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤ –∏–ª–∏ –º–æ–¥—É–ª–µ–π:  
  `final subScope = CherryPickProvider.of(context).openSubScope(scopeName: "profileFeature");`

---
## CherryPick –ø–æ–¥—Ö–æ–¥–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è Flutter!

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CherryPick –∏ –≤ Dart CLI, —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –±–µ–∑ Flutter.

---

## –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ CherryPick: –ø–æ–ª–Ω—ã–π –ø—É—Ç—å

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```yaml
    dependencies:
      cherrypick: ^1.0.0
      cherrypick_annotations: ^1.0.0

    dev_dependencies:
      build_runner: ^2.0.0
      cherrypick_generator: ^1.0.0
    ```

2. –û–ø–∏—Å—ã–≤–∞–µ—Ç–µ —Å–≤–æ–∏ –º–æ–¥—É–ª–∏ —Å –ø–æ–º–æ—â—å—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π.

3. –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ DI –∫–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
    ```shell
    dart run build_runner build --delete-conflicting-outputs
    ```

4. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º DI –±–µ–∑ –±–æ–ª–∏!

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**CherryPick** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ DI-—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è Dart –∏ Flutter, —Å–æ—á–µ—Ç–∞—é—â–µ–µ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π API –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞. –ì–∏–±–∫–æ—Å—Ç—å Scopes, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –±–∏–Ω–¥–∏–Ω–≥–∏ –∏ field-injection –¥–µ–ª–∞—é—Ç –µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ –º–æ—â–Ω—ã–º –∫–∞–∫ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö, —Ç–∞–∫ –∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.


**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –∏ –∏—Ö –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

| –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è     | –î–ª—è —á–µ–≥–æ                  | –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç                    |
| ------------- | ------------------------- | -------------------------------- |
| `@module`     | DI-–º–æ–¥—É–ª—å                 | –ö–ª–∞—Å—Å—ã                           |
| `@singleton`  | Singleton                 | –ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞                    |
| `@instance`   | –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç              | –ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞                    |
| `@provide`    | –ü—Ä–æ–≤–∞–π–¥–µ—Ä                 | –ú–µ—Ç–æ–¥—ã (—Å DI params)             |
| `@named`      | –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π –±–∏–Ω–¥–∏–Ω–≥       | –ê—Ä–≥—É–º–µ–Ω—Ç –º–µ—Ç–æ–¥–∞/–ê—Ç—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞ |
| `@params`     | –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤       | –ê—Ä–≥—É–º–µ–Ω—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞              |
| `@injectable` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ field injection | –ö–ª–∞—Å—Å—ã                           |
| `@inject`     | –ê–≤—Ç–æ–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ             | –ê—Ç—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞                 |
| `@scope`      | Scope/realm               | –ê—Ç—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞                 |

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [cherrypick](https://pub.dev/packages/cherrypick)
- [cherrypick_annotations](https://pub.dev/packages/cherrypick_annotations)
- [cherrypick_generator](https://pub.dev/packages/cherrypick_generator)
- [–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –Ω–∞ GitHub](https://github.com/xddev/cherrypick)

---

üéâ –ì–æ—Ç–æ–≤—ã –≤–Ω–µ–¥—Ä—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ-–≤–∑—Ä–æ—Å–ª–æ–º—É? CherryPick ‚Äî –¥–ª—è –≤–∞—Å!